
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Upload para o Cloud Run</title>
</head>
<body>
    <h1>Upload para o Cloud Run</h1>
    <input type="file" id="imageInput" />
    <button onclick="handleFileUpload()">Enviar</button>

    <script type="text/javascript">
        async function uploadImage(file) {
            const formData = new FormData();
            formData.append("image", file);

            try {
                const response = await fetch("https://upload-api-gestao-de-artes-rigolim.a.run.app/upload", {
                    method: "POST",
                    body: formData
                });

                const result = await response.json();

                if (response.ok) {
                    alert("Imagem enviada com sucesso!");
                    console.log("URL da imagem:", result.url);
                } else {
                    throw new Error(result.error || "Erro no upload.");
                }
            } catch (error) {
                console.error("Erro no upload:", error.message);
                alert("Falha ao enviar imagem.");
            }
        }

        function handleFileUpload() {
            const input = document.getElementById("imageInput");
            const file = input.files[0];

            if (!file) {
                alert("Selecione um arquivo primeiro.");
                return;
            }

            uploadImage(file);
        }
    </script>
</body>
</html>
